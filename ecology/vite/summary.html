<!DOCTYPE html>
<html lang="zh-cn">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>vite项目优化插件汇总 | 个人博客</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://zuojiangtao.github.io/ecology/vite/summary.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="zh-cn" href="https://zuojiangtao.github.io/ecology/vite/summary">
    
      <link rel="alternative" hreflang="en" href="https://zuojiangtao.github.io/en/ecology/vite/summary">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="/css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-w/font-awesome/4.7.0/css/font-awesome.min.css">
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/" id="logo">H3C</a>
    </h1>
    <nav id="main-nav">
      <a href="/standard/" class="main-nav-link">开发规范</a><a href="/design/" class="main-nav-link">开发指南</a><a href="/ecology/" class="main-nav-link">生态系统</a>
    </nav>
    <div id="github-icon-link">
      <a href="https://github.com/Zuojiangtao" rel="external nofollow noreferrer" class="icon" target="_blank"><i class="fa fa-github"></i></a>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">vite项目优化插件汇总</h1>
                <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Zuojiangtao/Zuojiangtao.github.io/tree/master/source/ecology/vite/summary.md" class="article-edit-link" title="改进本文"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <p>前端项目性能优化和开发体验优化是无法避免的一个话题，在之前使用webpack做应用构建的时候，我们有许多手段和插件来做优化。当我们使用vite构建应用时也有许多插件来做优化，本文对vite的优化插件或方法做下汇总。</p>
<h3 id="一、性能优化" class="article-heading"><a href="#一、性能优化" class="headerlink" title="一、性能优化"></a>一、性能优化<a class="article-anchor" href="#一、性能优化" aria-hidden="true"></a></h3><h4 id="1-html处理" class="article-heading"><a href="#1-html处理" class="headerlink" title="1. html处理"></a>1. html处理<a class="article-anchor" href="#1-html处理" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/vbenjs/vite-plugin-html">vite-plugin-html</a></p>
<p>vite-plugin-html 是一个 Vite 插件，用于将传统 HTML 文件作为输出文件使用。该插件基于 html-webpack-plugin 插件创建，但是是专门为 Vite 构建的优化工具，不依赖于 webpack。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add vite-plugin-html -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig, <span class="title class_">Plugin</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createHtmlPlugin &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-html&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line">    <span class="title function_">createHtmlPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">minify</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * 在这里写entry后，你将不需要在`index.html`内添加 script 标签，原有标签需要删除</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@default</span> src/main.ts</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="attr">entry</span>: <span class="string">&#x27;src/main.ts&#x27;</span>,</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * 如果你想将 `index.html`存放在指定文件夹，可以修改它，否则不需要配置</span></span><br><span class="line"><span class="comment">       * <span class="doctag">@default</span> index.html</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;public/index.html&#x27;</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * 需要注入 index.html ejs 模版的数据</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="attr">inject</span>: &#123;</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">          <span class="attr">injectScript</span>: <span class="string">`&lt;script src=&quot;./inject.js&quot;&gt;&lt;/script&gt;`</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">tags</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">injectTo</span>: <span class="string">&#x27;body-prepend&#x27;</span>,</span><br><span class="line">            <span class="attr">tag</span>: <span class="string">&#x27;div&#x27;</span>,</span><br><span class="line">            <span class="attr">attrs</span>: &#123;</span><br><span class="line">              <span class="attr">id</span>: <span class="string">&#x27;tag&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="2-图片压缩" class="article-heading"><a href="#2-图片压缩" class="headerlink" title="2. 图片压缩"></a>2. 图片压缩<a class="article-anchor" href="#2-图片压缩" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/FatehAK/vite-plugin-image-optimizer">vite-plugin-image-optimizer</a></p>
<p>vite-plugin-image-optimizer 是一个 Vite 插件，用于自动优化应用程序中的图像文件。该插件可以帮助开发者减少应用程序的加载时间和带宽使用，从而提高用户体验和网站性能。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add vite-plugin-image-optimizer -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ViteImageOptimizer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-image-optimizer&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      <span class="title class_">ViteImageOptimizer</span>(&#123;</span><br><span class="line">        <span class="comment">/* pass your config */</span></span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="3-gzip代码压缩" class="article-heading"><a href="#3-gzip代码压缩" class="headerlink" title="3. gzip代码压缩"></a>3. gzip代码压缩<a class="article-anchor" href="#3-gzip代码压缩" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/anncwb/vite-plugin-compression">vite-plugin-compression</a></p>
<p>vite-plugin-compression是一个基于Vite的插件,用于gzip或Brotli压缩你的资源，从而减少页面的加载时间和网络带宽，提高用户访问速度和体验。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add vite-plugin-compression -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> viteCompression <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-compression&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="title function_">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [<span class="title function_">viteCompression</span>()],</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="4-依赖cdn" class="article-heading"><a href="#4-依赖cdn" class="headerlink" title="4. 依赖cdn"></a>4. 依赖cdn<a class="article-anchor" href="#4-依赖cdn" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Zuojiangtao/vite-plugin-external-cdn">vite-plugin-external-cdn</a></p>
<p>vite-plugin-external-cdn一款将依赖转换为cdn的vite插件，脱胎于vite-plugin-cdn-import，由于vite-plugin-cdn-import停止维护，我fork了一份到本地，并对一些bug做了修复，做了开源。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add vite-plugin-external-cdn -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// vite.config.js</span></span><br><span class="line"><span class="keyword">import</span> reactRefresh <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-react-refresh&#x27;</span></span><br><span class="line"><span class="keyword">import</span> transformExternalCDN <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-external-cdn&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      <span class="title function_">transformExternalCDN</span>(&#123;</span><br><span class="line">            <span class="attr">modules</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;react&#x27;</span>,</span><br><span class="line">                    <span class="attr">var</span>: <span class="string">&#x27;React&#x27;</span>,</span><br><span class="line">                    <span class="attr">path</span>: <span class="string">`umd/react.production.min.js`</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;react-dom&#x27;</span>,</span><br><span class="line">                    <span class="attr">var</span>: <span class="string">&#x27;ReactDOM&#x27;</span>,</span><br><span class="line">                    <span class="attr">path</span>: <span class="string">`umd/react-dom.production.min.js`</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            ],</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-生产环境移除console" class="article-heading"><a href="#5-生产环境移除console" class="headerlink" title="5. 生产环境移除console"></a>5. 生产环境移除console<a class="article-anchor" href="#5-生产环境移除console" aria-hidden="true"></a></h4><ul>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/xiaoxian521/vite-plugin-remove-console">vite-plugin-remove-console</a></li>
</ul>
<p>vite-plugin-remove-console事一款生产环境删除所有指定console类型的vite插件。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add vite-plugin-remove-console -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&quot;vite&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> removeConsole <span class="keyword">from</span> <span class="string">&quot;vite-plugin-remove-console&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(), <span class="title function_">removeConsole</span>()]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>直接vite配置esbuild - drop</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">esbuild</span>: &#123;</span><br><span class="line">  <span class="comment">// 移除日志打印及debugger,可在env配置VITE_DROP_CONSOLE</span></span><br><span class="line">  <span class="attr">drop</span>: <span class="variable constant_">VITE_DROP_CONSOLE</span> ? [<span class="string">&#x27;console&#x27;</span>, <span class="string">&#x27;debugger&#x27;</span>] : []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-依赖分析" class="article-heading"><a href="#6-依赖分析" class="headerlink" title="6. 依赖分析"></a>6. 依赖分析<a class="article-anchor" href="#6-依赖分析" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/btd/rollup-plugin-visualizer">rollup-plugin-visualizer</a></p>
<p>rollup-plugin-visualizer 是一个用于可视化 Rollup 打包输出文件的插件，它可以帮助开发者分析和优化代码依赖关系，从而提高代码性能和可读性。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add rollup-plugin-visualizer -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">PluginOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> visualizer <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-visualizer&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">vue</span>(),</span><br><span class="line">        <span class="title function_">visualizer</span>(&#123;</span><br><span class="line">            <span class="comment">// template: &#x27;treemap&#x27;, // sunburst | treemap | network | raw-data | list</span></span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;./node_modules/.cache/visualizer/stats.html&#x27;</span>,</span><br><span class="line">            <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">gzipSize</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">brotliSize</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;) <span class="keyword">as</span> <span class="title class_">PluginOption</span></span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="二、开发体验优化" class="article-heading"><a href="#二、开发体验优化" class="headerlink" title="二、开发体验优化"></a>二、开发体验优化<a class="article-anchor" href="#二、开发体验优化" aria-hidden="true"></a></h3><h4 id="1-自动导入第三方ui库组件" class="article-heading"><a href="#1-自动导入第三方ui库组件" class="headerlink" title="1. 自动导入第三方ui库组件"></a>1. 自动导入第三方ui库组件<a class="article-anchor" href="#1-自动导入第三方ui库组件" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/antfu/unplugin-vue-components">unplugin-vue-components</a></p>
<p>unplugin-vue-components 是一个 Vite 插件，用于自动化地将您的 Vue.js 组件库导出为独立包。该插件可以帮助您更轻松地编写和共享 Vue 组件，并提供更好的开发体验和代码复用性。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add unplugin-vue-components -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AntDesignVueResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">vue</span>(),</span><br><span class="line">        <span class="title class_">Components</span>(&#123;</span><br><span class="line">            <span class="attr">resolvers</span>: [</span><br><span class="line">                <span class="title class_">AntDesignVueResolver</span>(&#123;</span><br><span class="line">                    <span class="attr">importStyle</span>: <span class="string">&#x27;less&#x27;</span>,</span><br><span class="line">                    <span class="attr">resolveIcons</span>: <span class="literal">true</span>,</span><br><span class="line">                &#125;),</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">dts</span>: <span class="string">&#x27;types/components.d.ts&#x27;</span>,</span><br><span class="line">            <span class="attr">include</span>: [<span class="regexp">/\.vue$/</span>, <span class="regexp">/\.vue\?vue/</span>, <span class="regexp">/\.md$/</span>],</span><br><span class="line">            <span class="attr">version</span>: <span class="number">3</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="2-自动引入类型定义" class="article-heading"><a href="#2-自动引入类型定义" class="headerlink" title="2. 自动引入类型定义"></a>2. 自动引入类型定义<a class="article-anchor" href="#2-自动引入类型定义" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/antfu/unplugin-auto-import">unplugin-auto-import</a></p>
<p>unplugin-auto-import 是一个 Vite 插件，可以自动将需要的模块或库注入到 JavaScript 或 TypeScript 文件中。该插件可以帮助开发者减少手动导入模块的工作量，并且可以防止由于拼写错误或路径错误导致的编译错误。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add unplugin-auto-import -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">PluginOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">vue</span>(),</span><br><span class="line">        <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">            <span class="attr">imports</span>: [</span><br><span class="line">                <span class="string">&#x27;vue&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;vue-router&#x27;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&#x27;@vueuse/core&#x27;</span>: [</span><br><span class="line">                        <span class="comment">// named imports</span></span><br><span class="line">                        <span class="string">&#x27;useMouse&#x27;</span>, <span class="comment">// import &#123; useMouse &#125; from &#x27;@vueuse/core&#x27;,</span></span><br><span class="line">                        <span class="string">&#x27;usePreferredDark&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;useDark&#x27;</span>,</span><br><span class="line">                        <span class="string">&#x27;useTitle&#x27;</span>,</span><br><span class="line">                        <span class="comment">// alias</span></span><br><span class="line">                        [<span class="string">&#x27;useFetch&#x27;</span>, <span class="string">&#x27;useMyFetch&#x27;</span>], <span class="comment">// import &#123; useFetch as useMyFetch &#125; from &#x27;@vueuse/core&#x27;,</span></span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">axios</span>: [</span><br><span class="line">                        <span class="comment">// default imports</span></span><br><span class="line">                        [<span class="string">&#x27;default&#x27;</span>, <span class="string">&#x27;axios&#x27;</span>], <span class="comment">// import &#123; default as axios &#125; from &#x27;axios&#x27;,</span></span><br><span class="line">                    ],</span><br><span class="line">                &#125;,</span><br><span class="line">            ],</span><br><span class="line">            <span class="comment">// resolvers: [AntDesignVueResolver()],</span></span><br><span class="line">            <span class="attr">vueTemplate</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">cache</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">dirs</span>: [<span class="string">&#x27;src/hooks&#x27;</span>, <span class="string">&#x27;src/components&#x27;</span>],</span><br><span class="line">            <span class="attr">dts</span>: <span class="string">&#x27;types/auto-imports.d.ts&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在vue组件直接使用相关api，不需要手动引入：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">const count = ref(0)</span><br><span class="line">const doubled = computed(() =&gt; count.value * 2)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-svg作为组件使用" class="article-heading"><a href="#3-svg作为组件使用" class="headerlink" title="3. svg作为组件使用"></a>3. svg作为组件使用<a class="article-anchor" href="#3-svg作为组件使用" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jpkleemans/vite-svg-loader">vite-svg-loader</a></p>
<p>vite-svg-loader 是一个 Vite 插件，用于加载和处理 SVG 文件。它可以帮助开发者在应用程序中无缝使用 SVG 图像，并提供了一些额外的功能来优化和定制 SVG 图像的使用。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add vite-svg-loader -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">PluginOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> svgLoader <span class="keyword">from</span> <span class="string">&#x27;vite-svg-loader&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">vue</span>(),</span><br><span class="line">        <span class="title function_">svgLoader</span>(&#123;</span><br><span class="line">            <span class="attr">defaultImport</span>: <span class="string">&#x27;url&#x27;</span>, <span class="comment">// or &#x27;raw&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在vue组件使用svg作为组件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;MyIcon /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import MyIcon from &#x27;@/assets/icons/cancel.svg?component&#x27;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="4-在md文档中直接使用vue组件" class="article-heading"><a href="#4-在md文档中直接使用vue组件" class="headerlink" title="4. 在md文档中直接使用vue组件"></a>4. 在md文档中直接使用vue组件<a class="article-anchor" href="#4-在md文档中直接使用vue组件" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/antfu/vite-plugin-md">vite-plugin-md</a></p>
<p>vite-plugin-md 是一个 Vite 插件，用于在 Vue 项目中加载和渲染 Markdown 文件。它可以帮助开发者更方便地在应用程序中使用和管理 Markdown 内容，将 Markdown 文件转换为可交互的 HTML 页面。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add vite-plugin-md -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Markdown</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-md&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">vue</span>(&#123;</span><br><span class="line">            <span class="attr">include</span>: [<span class="regexp">/\.vue$/</span>, <span class="regexp">/\.md$/</span>], <span class="comment">// &lt;--</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">// 为了解决 Error [ERR_PACKAGE_PATH_NOT_EXPORTED], 在package.json增加 &quot;type&quot;: &quot;module&quot;</span></span><br><span class="line">        <span class="title class_">Markdown</span>(),</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在ts类型定义：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// types/global.d.ts</span></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&#x27;*.vue&#x27;</span> &#123;</span><br><span class="line">  <span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">ComponentOptions</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Component</span>: <span class="title class_">ComponentOptions</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Component</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&#x27;*.md&#x27;</span> &#123;</span><br><span class="line">  <span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">ComponentOptions</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Component</span>: <span class="title class_">ComponentOptions</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Component</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在md文档中展示vue组件：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># My Page</span></span><br><span class="line">There I was, there I was ... in the jungle. Then I started hearing this ticking sound and I realized it was some sort of <span class="emphasis">_counter_</span>?</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Counter</span> <span class="attr">:init</span>=<span class="string">&#x27;5&#x27;</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line">I looked a bit closer and realized I could <span class="strong">**press**</span> this counter and it would change! What is this magic?</span><br></pre></td></tr></table></figure>

<p>在vue组件中使用md文档：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;HelloWorld /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import HelloWorld from &#x27;./README.md&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    HelloWorld,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="5-移动端vconsole" class="article-heading"><a href="#5-移动端vconsole" class="headerlink" title="5. 移动端vconsole"></a>5. 移动端vconsole<a class="article-anchor" href="#5-移动端vconsole" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/vadxq/vite-plugin-vconsole">vite-plugin-vconsole</a></p>
<p>一个适用于 Vite v2+的插件，帮助开发者在各个环境下方便使用VConsole的功能。可以方便配置区分环境，根据环境动态加载VConsole，支持多页面配置。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add vite-plugin-vconsole -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// tips: 如果引用path提示不存在，可以引入@types/node包</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; viteVConsole &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vconsole&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line">    <span class="title function_">viteVConsole</span>(&#123;</span><br><span class="line">      <span class="attr">entry</span>: path.<span class="title function_">resolve</span>(<span class="string">&#x27;src/main.ts&#x27;</span>), <span class="comment">// 或者可以使用这个配置: [path.resolve(&#x27;src/main.ts&#x27;)]</span></span><br><span class="line">      <span class="attr">enabled</span>: <span class="literal">true</span>, <span class="comment">// 可自行结合 mode 和 command 进行判断</span></span><br><span class="line">      <span class="attr">config</span>: &#123;</span><br><span class="line">        <span class="attr">maxLogNumber</span>: <span class="number">1000</span>,</span><br><span class="line">        <span class="attr">theme</span>: <span class="string">&#x27;dark&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="6-mock服务使用" class="article-heading"><a href="#6-mock服务使用" class="headerlink" title="6. mock服务使用"></a>6. mock服务使用<a class="article-anchor" href="#6-mock服务使用" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/vbenjs/vite-plugin-mock">vite-plugin-mock</a></p>
<p>vite 的数据模拟插件，是基于 vite.js 开发的。 并同时支持本地环境和生产环境。 Connect 服务中间件在本地使用，mockjs 在生产环境中使用。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add mockjs</span><br><span class="line">pnpm add vite-plugin-mock -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<ul>
<li>开发环境：</li>
</ul>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts 配置</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserConfigExport</span>, <span class="title class_">ConfigEnv</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; viteMockServe &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-mock&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="title function_">default</span> (&#123; command &#125;: <span class="title class_">ConfigEnv</span>): <span class="function"><span class="params">UserConfigExport</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">plugins</span>: [</span><br><span class="line">            <span class="title function_">vue</span>(),</span><br><span class="line">            <span class="title function_">viteMockServe</span>(&#123;</span><br><span class="line">                <span class="attr">mockPath</span>: <span class="string">&#x27;mock&#x27;</span>,</span><br><span class="line">                <span class="attr">enable</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">        ],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// viteMockSer 配置</span></span><br><span class="line">&#123;</span><br><span class="line">    mockPath?: <span class="built_in">string</span>;</span><br><span class="line">    ignore?: <span class="title class_">RegExp</span> | (<span class="function">(<span class="params"><span class="attr">fileName</span>: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">boolean</span>);</span><br><span class="line">    watchFiles?: <span class="built_in">boolean</span>;</span><br><span class="line">    enable?: <span class="built_in">boolean</span>;</span><br><span class="line">    ignoreFiles?: <span class="built_in">string</span>[];</span><br><span class="line">    configPath?: <span class="built_in">string</span>;</span><br><span class="line">    logger?:<span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>生产环境<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  mockProdServer.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; createProdMockServer &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-mock/client&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 逐一导入您的mock.ts文件</span></span><br><span class="line"><span class="comment">// 如果使用vite.mock.config.ts，只需直接导入文件</span></span><br><span class="line"><span class="comment">// 可以使用 import.meta.glob功能来进行全部导入</span></span><br><span class="line"><span class="keyword">import</span> testModule <span class="keyword">from</span> <span class="string">&#x27;../mock/test&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setupProdMockServer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">createProdMockServer</span>([...testModule])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts 配置</span></span><br><span class="line"><span class="keyword">import</span> &#123; viteMockServe &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-mock&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserConfigExport</span>, <span class="title class_">ConfigEnv</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="title function_">default</span> (&#123; command &#125;: <span class="title class_">ConfigEnv</span>): <span class="function"><span class="params">UserConfigExport</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      <span class="title function_">viteMockServe</span>(&#123;</span><br><span class="line">        <span class="attr">mockPath</span>: <span class="string">&#x27;mock&#x27;</span>,</span><br><span class="line">        <span class="comment">// 根据项目配置。可以配置在.env文件</span></span><br><span class="line">        <span class="attr">enable</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-第三方云存储" class="article-heading"><a href="#7-第三方云存储" class="headerlink" title="7. 第三方云存储"></a>7. 第三方云存储<a class="article-anchor" href="#7-第三方云存储" aria-hidden="true"></a></h4><ul>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/taosiqi/vite-plugin-tencent-oss">vite-plugin-tencent-oss</a></li>
</ul>
<p>将项目中打包后生产文件上传到腾讯云COS，除了 html 以外。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add vite-plugin-tencent-oss -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vitePluginTencentOss <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-tencent-oss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  <span class="attr">region</span>: <span class="string">&#x27;&lt;Your Region&gt;&#x27;</span>,</span><br><span class="line">  <span class="attr">secretId</span>: <span class="string">&#x27;&lt;Your Secret ID&gt;&#x27;</span>,</span><br><span class="line">  <span class="attr">secretKey</span>: <span class="string">&#x27;&lt;Your Secret Key&gt;&#x27;</span>,</span><br><span class="line">  <span class="attr">bucket</span>: <span class="string">&#x27;&lt;Your Bucket&gt;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prod = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">base</span>: prod ? <span class="string">&#x27;https://foo.com/&#x27;</span> : <span class="string">&#x27;/&#x27;</span>, <span class="comment">// 打包时必须是 URL</span></span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(), <span class="title function_">vitePluginTencentOss</span>(options)]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/xiaweiss/vite-plugin-ali-oss">vite-plugin-ali-oss</a></li>
</ul>
<p>将项目中打包后生产文件上传到 Ali OSS，除了 html 以外。</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add vite-plugin-ali-oss -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vitePluginAliOss <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-ali-oss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  <span class="attr">region</span>: <span class="string">&#x27;&lt;Your Region&gt;&#x27;</span>,</span><br><span class="line">  <span class="attr">accessKeyId</span>: <span class="string">&#x27;&lt;Your Access Key ID&gt;&#x27;</span>,</span><br><span class="line">  <span class="attr">accessKeySecret</span>: <span class="string">&#x27;&lt;Your Access Key Secret&gt;&#x27;</span>,</span><br><span class="line">  <span class="attr">bucket</span>: <span class="string">&#x27;&lt;Your Bucket&gt;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prod = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">base</span>: prod ? <span class="string">&#x27;https://foo.com/&#x27;</span> : <span class="string">&#x27;/&#x27;</span>, <span class="comment">// 打包时必须是 URL</span></span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>(), <span class="title function_">vitePluginAliOss</span>(options)]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/th-come/vite-plugin-qiniu-oss">vite-plugin-qiniu-oss</a></li>
</ul>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm add vite-plugin-qiniu-oss -D</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vitePluginQiniuOss <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-qiniu-oss&#x27;</span></span><br><span class="line"><span class="keyword">const</span> uploadPath = <span class="built_in">require</span>(<span class="string">&#x27;./package.json&#x27;</span>).<span class="property">name</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> openUpload = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> == <span class="string">&#x27;production&#x27;</span> ? <span class="literal">true</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">base</span>: openUpload ? <span class="string">`https://qiniu.xxx.com/<span class="subst">$&#123;uploadPath&#125;</span>/`</span>: <span class="string">`./`</span>, <span class="comment">// same with webpack public path</span></span><br><span class="line">	<span class="attr">plugins</span>: [<span class="title function_">vue</span>(), <span class="title function_">vitePluginQiniuOss</span>(openUpload)]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新建`.qiniu.config.js`配置文件，并且在 `.gitignore` 忽略此文件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> uploadPath = <span class="built_in">require</span>(<span class="string">&#x27;./package.json&#x27;</span>).<span class="property">name</span>;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">accessKey</span>: <span class="string">&#x27;qiniu access key&#x27;</span>,</span><br><span class="line">  <span class="attr">secretKey</span>: <span class="string">&#x27;qiniu secret key&#x27;</span>,</span><br><span class="line">  <span class="attr">bucket</span>: <span class="string">&#x27;demo&#x27;</span>,</span><br><span class="line">  <span class="attr">bucketDomain</span>: <span class="string">&#x27;https://domain.bkt.clouddn.com&#x27;</span>,</span><br><span class="line">  <span class="attr">uploadPath</span>: <span class="string">`/<span class="subst">$&#123;uploadPath&#125;</span>/`</span>,</span><br><span class="line">  <span class="attr">batch</span>: <span class="number">10</span>,</span><br><span class="line">  <span class="attr">zone</span>: <span class="string">&#x27;Zone_z0&#x27;</span>,</span><br><span class="line">  <span class="attr">ignore</span>: [<span class="string">&#x27;**/*.html&#x27;</span>, <span class="string">&#x27;**/*.map&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-依赖预构建" class="article-heading"><a href="#8-依赖预构建" class="headerlink" title="8. 依赖预构建"></a>8. 依赖预构建<a class="article-anchor" href="#8-依赖预构建" aria-hidden="true"></a></h4><p>vite在开发环境使用了esbuild，在进入新页面时，如果有引入新的依赖浏览器才会加载新依赖。为了优化开发体验，官方支持<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cn.vitejs.dev/guide/dep-pre-bundling.html">依赖预构建</a>。</p>
<p>所谓的预构建是为了开发时将某些依赖预先将esm转换成单个模块。这样牺牲了一些项目启动时间但是在切换页面时更流程不会等待太长时间。</p>
<blockquote>
<p>依赖预构建仅适用于开发模式，并使用 esbuild 将依赖项转换为 ES 模块。在生产构建中，将使用 @rollup&#x2F;plugin-commonjs。</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">UserConfig</span>, <span class="title class_">ConfigEnv</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig, loadEnv &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>((&#123; mode &#125;: <span class="title class_">ConfigEnv</span>): <span class="function"><span class="params">UserConfig</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// ...其他配置项</span></span><br><span class="line">        <span class="comment">// 依赖优化 - 预构建</span></span><br><span class="line">        <span class="attr">optimizeDeps</span>: &#123;</span><br><span class="line">            <span class="attr">include</span>: [<span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;pinia&#x27;</span>, <span class="string">&#x27;vue-router&#x27;</span>, <span class="string">&#x27;ant-design-vue/es&#x27;</span>, <span class="string">&#x27;@vueuse/core&#x27;</span>],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>更多配置项字段请看官方文档:<a target="_blank" rel="noopener external nofollow noreferrer" href="https://cn.vitejs.dev/config/dep-optimization-options.html">依赖优化选项</a></p>
<h3 id="三、更多资源" class="article-heading"><a href="#三、更多资源" class="headerlink" title="三、更多资源"></a>三、更多资源<a class="article-anchor" href="#三、更多资源" aria-hidden="true"></a></h3><p>更多vite插件资源请看官方: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/vitejs/awesome-vite">awesome-vite</a></p>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2024-10-23T03:38:37.673Z" itemprop="dateModified">上次更新：2024-10-23</time>
                <a href="index.html" class="article-footer-next" title="概述"><span>下一页</span><i class="fa fa-chevron-right"></i></a>
              </footer>
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">目录</strong>
              <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-text">一、性能优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-html%E5%A4%84%E7%90%86"><span class="toc-text">1. html处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9"><span class="toc-text">2. 图片压缩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-gzip%E4%BB%A3%E7%A0%81%E5%8E%8B%E7%BC%A9"><span class="toc-text">3. gzip代码压缩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BE%9D%E8%B5%96cdn"><span class="toc-text">4. 依赖cdn</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E7%A7%BB%E9%99%A4console"><span class="toc-text">5. 生产环境移除console</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E4%BE%9D%E8%B5%96%E5%88%86%E6%9E%90"><span class="toc-text">6. 依赖分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C%E4%BC%98%E5%8C%96"><span class="toc-text">二、开发体验优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5%E7%AC%AC%E4%B8%89%E6%96%B9ui%E5%BA%93%E7%BB%84%E4%BB%B6"><span class="toc-text">1. 自动导入第三方ui库组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%87%AA%E5%8A%A8%E5%BC%95%E5%85%A5%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89"><span class="toc-text">2. 自动引入类型定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-svg%E4%BD%9C%E4%B8%BA%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8"><span class="toc-text">3. svg作为组件使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%9C%A8md%E6%96%87%E6%A1%A3%E4%B8%AD%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8vue%E7%BB%84%E4%BB%B6"><span class="toc-text">4. 在md文档中直接使用vue组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%A7%BB%E5%8A%A8%E7%AB%AFvconsole"><span class="toc-text">5. 移动端vconsole</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-mock%E6%9C%8D%E5%8A%A1%E4%BD%BF%E7%94%A8"><span class="toc-text">6. mock服务使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E7%AC%AC%E4%B8%89%E6%96%B9%E4%BA%91%E5%AD%98%E5%82%A8"><span class="toc-text">7. 第三方云存储</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E4%BE%9D%E8%B5%96%E9%A2%84%E6%9E%84%E5%BB%BA"><span class="toc-text">8. 依赖预构建</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%9B%B4%E5%A4%9A%E8%B5%84%E6%BA%90"><span class="toc-text">三、更多资源</span></a></li></ol>
              <a href="#" id="article-toc-top">回到顶部</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">开始使用</strong><a href="/ecology/index.html" class="sidebar-link">概述</a><strong class="sidebar-title">开发工具</strong><a href="/ecology/qiankun/guide.html" class="sidebar-link">qiankun文档指南</a><a href="/ecology/qiankun/questions.html" class="sidebar-link">qiankun汇总</a><a href="/ecology/vite/guide.html" class="sidebar-link">vite文档指南</a><a href="/ecology/vite/summary.html" class="sidebar-link current">vite插件汇总</a><a href="/ecology/webpack/plugin.html" class="sidebar-link">webpack plugin开发实践</a><a href="/ecology/yapi/guide.html" class="sidebar-link">YApi文档</a><a href="/ecology/sentry/guide.html" class="sidebar-link">Sentry指南</a><a href="/ecology/rsbuild/vue2toRsbuild.html" class="sidebar-link">vue/cli项目迁移到RSBuild</a><a href="/ecology/build/nrm.html" class="sidebar-link">npm镜像源配置</a><a href="/ecology/mcp/cursorMasterGoMcp.html" class="sidebar-link">AI时代前端开发工作流</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2025 <a href="https://github.com/hexojs/hexo/graphs/contributors" rel="external nofollow noreferrer" target="_blank">zuo.jiangtao@h3c.com/ZuoJiangtao</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>.
    </div>
    <div id="footer-links">
      <a href="https://github.com/Zuojiangtao" rel="external nofollow noreferrer" class="footer-link" target="_blank"><i class="fa fa-github"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/standard/" class="mobile-nav-link">开发规范</a><a href="/design/" class="mobile-nav-link">开发指南</a><a href="/ecology/" class="mobile-nav-link">生态系统</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/https://github.com/Zuojiangtao" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">开始使用</strong><a href="/ecology/index.html" class="mobile-nav-link">概述</a><strong class="mobile-nav-title">开发工具</strong><a href="/ecology/qiankun/guide.html" class="mobile-nav-link">qiankun文档指南</a><a href="/ecology/qiankun/questions.html" class="mobile-nav-link">qiankun汇总</a><a href="/ecology/vite/guide.html" class="mobile-nav-link">vite文档指南</a><a href="/ecology/vite/summary.html" class="mobile-nav-link current">vite插件汇总</a><a href="/ecology/webpack/plugin.html" class="mobile-nav-link">webpack plugin开发实践</a><a href="/ecology/yapi/guide.html" class="mobile-nav-link">YApi文档</a><a href="/ecology/sentry/guide.html" class="mobile-nav-link">Sentry指南</a><a href="/ecology/rsbuild/vue2toRsbuild.html" class="mobile-nav-link">vue/cli项目迁移到RSBuild</a><a href="/ecology/build/nrm.html" class="mobile-nav-link">npm镜像源配置</a><a href="/ecology/mcp/cursorMasterGoMcp.html" class="mobile-nav-link">AI时代前端开发工作流</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>简体中文</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="zh-cn" selected>简体中文</option>
      
        <option value="en">English</option>
      
    </select>
  </div>
</nav>
</body>
</html>
