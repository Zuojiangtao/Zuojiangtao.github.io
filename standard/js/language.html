<!DOCTYPE html>
<html lang="zh-cn">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>语言规范 | 个人博客</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://zuojiangtao.github.io/standard/js/language.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="zh-cn" href="https://zuojiangtao.github.io/standard/js/language">
    
      <link rel="alternative" hreflang="en" href="https://zuojiangtao.github.io/en/standard/js/language">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="/css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-w/font-awesome/4.7.0/css/font-awesome.min.css">
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/" id="logo">H3C</a>
    </h1>
    <nav id="main-nav">
      <a href="/standard/" class="main-nav-link">开发规范</a><a href="/design/" class="main-nav-link">开发指南</a><a href="/ecology/" class="main-nav-link">前沿生态</a><a href="/util/" class="main-nav-link">开发工具</a>
    </nav>
    <div id="github-icon-link">
      <a href="https://github.com/Zuojiangtao" rel="external nofollow noreferrer" class="icon" target="_blank"><i class="fa fa-github"></i></a>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">语言规范</h1>
                <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Zuojiangtao/Zuojiangtao.github.io/tree/master/source/standard/js/language.md" class="article-edit-link" title="改进本文"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <h2 id="语言规范" class="article-heading"><a href="#语言规范" class="headerlink" title="语言规范"></a>语言规范<a class="article-anchor" href="#语言规范" aria-hidden="true"></a></h2><p>JavaScript 是一种客户端脚本语言，这里列出了编写 JavaScript 时需要遵守的规则。</p>
<h3 id="类型" class="article-heading"><a href="#类型" class="headerlink" title="类型"></a>类型<a class="article-anchor" href="#类型" aria-hidden="true"></a></h3><ul>
<li><p>原始类型: 存取原始类型直接作用于值本身</p>
<ul>
<li>布尔类型</li>
<li>Null 类型</li>
<li>Undefined 类型</li>
<li>数字类型</li>
<li>BigInt 类型</li>
<li>字符串类型</li>
<li>符号类型 Symbol</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> bar = foo</span><br><span class="line"></span><br><span class="line">bar = <span class="number">9</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo, bar) <span class="comment">// 1, 9</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>复杂类型: 访问复杂类型作用于值的引用</p>
<ul>
<li>object</li>
<li>array</li>
<li>function</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> bar = foo</span><br><span class="line"></span><br><span class="line">bar[<span class="number">0</span>] = <span class="number">9</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo[<span class="number">0</span>], bar[<span class="number">0</span>]) <span class="comment">// 9, 9</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="引用" class="article-heading"><a href="#引用" class="headerlink" title="引用"></a>引用<a class="article-anchor" href="#引用" aria-hidden="true"></a></h3><ul>
<li>请记得 <code>const</code> 和 <code>let</code> 都是块级作用域，<code>var</code> 是函数级作用域</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// const and let only exist in the blocks they are defined in.</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line">  <span class="keyword">const</span> b = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// ReferenceError</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b) <span class="comment">// ReferenceError</span></span><br></pre></td></tr></table></figure>

<ul>
<li>对所有引用都使用 <code>const</code>，不要使用 <code>var</code>，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/prefer-const.html">prefer-const</a>, <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-const-assign.html">no-const-assign</a></li>
</ul>
<blockquote>
<p>原因：这样做可以确保你无法重新分配引用，以避免出现错误和难以理解的代码</p>
</blockquote>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="number">2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果引用是可变动的，使用 <code>let</code> 代替 <code>var</code>，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-var.html">no-var</a></li>
</ul>
<blockquote>
<p>原因：<code>let</code> 是块级作用域的，而不像 <code>var</code> 属于函数级作用域</p>
</blockquote>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> (count &lt; <span class="number">10</span>) &#123;</span><br><span class="line">  count += <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> (count &lt; <span class="number">10</span>) &#123;</span><br><span class="line">  count += <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="对象" class="article-heading"><a href="#对象" class="headerlink" title="对象"></a>对象<a class="article-anchor" href="#对象" aria-hidden="true"></a></h3><ul>
<li><p>请使用字面量值创建对象，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-new-object.html">no-new-object</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="keyword">new</span> <span class="title class_">Object</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> a = &#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>别使用保留字作为对象的键值，这样在 IE8 下不会运行</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  <span class="attr">default</span>: &#123;&#125;,  <span class="comment">// default 是保留字</span></span><br><span class="line">  <span class="attr">common</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  <span class="attr">defaults</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">common</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>当使用动态属性名创建对象时，请使用对象计算属性名来进行创建</p>
</li>
</ul>
<blockquote>
<p>原因：因为这样做就可以让你在一个地方定义所有的对象属性</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getKey</span>(<span class="params">k</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`a key named <span class="subst">$&#123;k&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;San Francisco&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line">obj[<span class="title function_">getKey</span>(<span class="string">&#x27;enabled&#x27;</span>)] = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;San Francisco&#x27;</span>,</span><br><span class="line">  [<span class="title function_">getKey</span>(<span class="string">&#x27;enabled&#x27;</span>)]: <span class="literal">true</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>请使用对象方法的简写方式，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/object-shorthand.html">object-shorthand</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> item = &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">addValue</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> item.<span class="property">value</span> + val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> item = &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">addValue</span> (val) &#123;</span><br><span class="line">    <span class="keyword">return</span> item.<span class="property">value</span> + val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>请使用对象属性值的简写方式，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/object-shorthand.html">object-shorthand</a></p>
<blockquote>
<p>原因：这样更简短且描述更清楚</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> job = <span class="string">&#x27;FrontEnd&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> item = &#123;</span><br><span class="line">  <span class="attr">job</span>: job</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> item = &#123;</span><br><span class="line">  job</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将简写的对象属性分组后统一放到对象声明的开头</p>
</li>
</ul>
<blockquote>
<p>原因：这样更容易区分哪些属性用了简写的方式</p>
</blockquote>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> job = <span class="string">&#x27;FrontEnd&#x27;</span></span><br><span class="line"><span class="keyword">const</span> department = <span class="string">&#x27;geely&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> item = &#123;</span><br><span class="line">  <span class="attr">sex</span>: <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">  job,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">  department</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> item = &#123;</span><br><span class="line">  job,</span><br><span class="line">  department,</span><br><span class="line">  <span class="attr">sex</span>: <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>只对非法标识符的属性使用引号，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/quote-props.html">quote-props</a></li>
</ul>
<blockquote>
<p>原因：因为通常来说我们认为这样主观上会更容易阅读，这样会带来代码高亮上的提升，同时也更容易被主流 JS 引擎优化</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> bad = &#123;</span><br><span class="line">  <span class="string">&#x27;foo&#x27;</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="string">&#x27;bar&#x27;</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="string">&#x27;data-blah&#x27;</span>: <span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> good = &#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">bar</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="string">&#x27;data-blah&#x27;</span>: <span class="number">5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不要直接使用 <code>Object.prototype</code> 的方法, 例如 <code>hasOwnProperty</code>, <code>propertyIsEnumerable</code> 和 <code>isPrototypeOf</code> 方法，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-prototype-builtins">no-prototype-builtins</a><blockquote>
<p>原因：这些方法可能会被对象自身的同名属性覆盖 - 比如 <code>&#123; hasOwnProperty: false &#125;</code> 或者对象可能是一个 <code>null</code> 对象(<code>Object.create(null)</code>)</p>
</blockquote>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object.<span class="title function_">hasOwnProperty</span>(key))</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(object, key))</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> has = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span> <span class="comment">// cache the lookup once, in module scope.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(has.<span class="title function_">call</span>(object, key))</span><br><span class="line"><span class="comment">/* or */</span></span><br><span class="line"><span class="keyword">import</span> has <span class="keyword">from</span> <span class="string">&#x27;has&#x27;</span> <span class="comment">// https://www.npmjs.com/package/has</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">has</span>(object, key))</span><br></pre></td></tr></table></figure>

<ul>
<li>优先使用对象展开运算符 <code>...</code> 来做对象浅拷贝而不是使用 <code>Object.assign</code>，使用对象剩余操作符来获得一个包含确定的剩余属性的新对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// very bad</span></span><br><span class="line"><span class="keyword">const</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="keyword">const</span> copy = <span class="title class_">Object</span>.<span class="title function_">assign</span>(original, &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;) <span class="comment">// this mutates `original` ಠ_ಠ</span></span><br><span class="line"><span class="keyword">delete</span> copy.<span class="property">a</span> <span class="comment">// so does this</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="keyword">const</span> copy = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, original, &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;) <span class="comment">// copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="keyword">const</span> copy = &#123; ...original, <span class="attr">c</span>: <span class="number">3</span> &#125; <span class="comment">// copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; a, ...noA &#125; = copy <span class="comment">// noA =&gt; &#123; b: 2, c: 3 &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="数组" class="article-heading"><a href="#数组" class="headerlink" title="数组"></a>数组<a class="article-anchor" href="#数组" aria-hidden="true"></a></h3><ul>
<li><p>请使用字面量值创建数组，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-array-constructor.html">no-array-constructor</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> items = <span class="keyword">new</span> <span class="title class_">Array</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> items = []</span><br></pre></td></tr></table></figure>
</li>
<li><p>向数组中添加元素时，请使用 <code>push</code> 方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> items = []</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line">items[items.<span class="property">length</span>] = <span class="string">&#x27;test&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">items.<span class="title function_">push</span>(<span class="string">&#x27;test&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用展开运算符 <code>...</code> 复制数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> items = []</span><br><span class="line"><span class="keyword">const</span> itemsCopy = []</span><br><span class="line"><span class="keyword">const</span> len = items.<span class="property">length</span></span><br><span class="line"><span class="keyword">let</span> i</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">  itemsCopy[i] = items[i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">itemsCopy = [...items]</span><br></pre></td></tr></table></figure>
</li>
<li><p>把一个可迭代的对象转换为数组时，使用展开运算符 <code>...</code> 而不是 <code>Array.from</code></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.foo&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> nodes = <span class="title class_">Array</span>.<span class="title function_">from</span>(foo)</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> nodes = [...foo]</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 <code>Array.from</code> 来将一个类数组对象转换为数组</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arrLike = &#123; <span class="number">0</span>: <span class="string">&#x27;foo&#x27;</span>, <span class="number">1</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;baz&#x27;</span>, <span class="attr">length</span>: <span class="number">3</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> arr = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(arrLike)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> arr = <span class="title class_">Array</span>.<span class="title function_">from</span>(arrLike)</span><br></pre></td></tr></table></figure>

<ul>
<li>遍历迭代器进行映射时使用 <code>Array.from</code> 代替扩展运算符 <code>...</code>, 因为这可以避免创建中间数组</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> baz = [...foo].<span class="title function_">map</span>(bar)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> baz = <span class="title class_">Array</span>.<span class="title function_">from</span>(foo, bar)</span><br></pre></td></tr></table></figure>


<ul>
<li><p>使用数组的 <code>map</code> 等方法时，请使用 <code>return</code> 声明，如果是单一声明语句的情况，可省略 <code>return</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> x * y</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> flat = &#123;&#125;</span><br><span class="line">[[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].<span class="title function_">reduce</span>(<span class="function">(<span class="params">memo, item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> flatten = memo.<span class="title function_">concat</span>(item)</span><br><span class="line">  flat[index] = flatten</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> flat = &#123;&#125;</span><br><span class="line">[[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].<span class="title function_">reduce</span>(<span class="function">(<span class="params">memo, item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> flatten = memo.<span class="title function_">concat</span>(item)</span><br><span class="line">  flat[index] = flatten</span><br><span class="line">  <span class="keyword">return</span> flatten</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line">inbox.<span class="title function_">filter</span>(<span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; subject, author &#125; = msg</span><br><span class="line">  <span class="keyword">if</span> (subject === <span class="string">&#x27;Mockingbird&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> author === <span class="string">&#x27;Harper Lee&#x27;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">inbox.<span class="title function_">filter</span>(<span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; subject, author &#125; = msg</span><br><span class="line">  <span class="keyword">if</span> (subject === <span class="string">&#x27;Mockingbird&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> author === <span class="string">&#x27;Harper Lee&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果一个数组有多行则要在数组的开括号后和闭括号前使用新行</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> objectInArray = [&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">2</span></span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numberInArray = [</span><br><span class="line">  <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> arr = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> objectInArray = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numberInArray = [</span><br><span class="line">  <span class="number">1</span>,</span><br><span class="line">  <span class="number">2</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="解构赋值" class="article-heading"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值<a class="article-anchor" href="#解构赋值" aria-hidden="true"></a></h3><ul>
<li>当需要使用对象的多个属性时，请使用解构赋值，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/prefer-destructuring">prefer-destructuring</a></li>
</ul>
<blockquote>
<p>愿意：解构可以避免创建属性的临时引用</p>
</blockquote>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getFullName</span> (<span class="params">user</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> firstName = user.<span class="property">firstName</span></span><br><span class="line">  <span class="keyword">const</span> lastName = user.<span class="property">lastName</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getFullName</span> (<span class="params">user</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; firstName, lastName &#125; = user</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// better</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getFullName</span> (<span class="params">&#123; firstName, lastName &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>当需要使用数组的多个值时，请同样使用解构赋值，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/prefer-destructuring">prefer-destructuring</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> first = arr[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">const</span> second = arr[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> [first, second] = arr</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数需要回传多个值时，请使用对象的解构，而不是数组的解构</p>
</li>
</ul>
<blockquote>
<p>原因：可以非破坏性地随时增加或者改变属性顺序</p>
</blockquote>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [top, right, bottom, left]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果是数组解构，那么在调用时就需要考虑数据的顺序</span></span><br><span class="line"><span class="keyword">const</span> [top, xx, xxx, left] = <span class="title function_">doSomething</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; top, right, bottom, left &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 此时不需要考虑数据的顺序</span></span><br><span class="line"><span class="keyword">const</span> &#123; top, left &#125; = <span class="title function_">doSomething</span>()</span><br></pre></td></tr></table></figure>

<h3 id="字符串" class="article-heading"><a href="#字符串" class="headerlink" title="字符串"></a>字符串<a class="article-anchor" href="#字符串" aria-hidden="true"></a></h3><ul>
<li><p>字符串统一使用单引号的形式 <code>&#39;&#39;</code>，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/quotes.html">quotes</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> department = <span class="string">&quot;geely&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> department = <span class="string">&#x27;geely&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串太长的时候，请不要使用字符串连接符换行 <code>\</code>，而是使用 <code>+</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;吉利研究院 吉利研究院 吉利研究院&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;吉利研究院 吉利研究院 吉利研究院&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;吉利研究院 吉利研究院&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>程序化生成字符串时，请使用模板字符串，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="http://eslint.org/docs/rules/prefer-template.html">prefer-template</a> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/template-curly-spacing">template-curly-spacing</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> test = <span class="string">&#x27;test&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> str = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, test].<span class="title function_">join</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">&#x27;a&#x27;</span> + <span class="string">&#x27;b&#x27;</span> + test</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">`ab<span class="subst">$&#123;test&#125;</span>`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>不要对字符串使用eval()，会导致太多漏洞， eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-eval">no-eval</a></p>
</li>
<li><p>不要在字符串中使用不必要的转义字符， eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-useless-escape">no-useless-escape</a></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="string">&#x27;\&#x27;this\&#x27; \i\s \&quot;quoted\&quot;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="string">&#x27;\&#x27;this\&#x27; is &quot;quoted&quot;&#x27;</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="string">`my name is &#x27;<span class="subst">$&#123;name&#125;</span>&#x27;`</span></span><br></pre></td></tr></table></figure>

<h3 id="函数" class="article-heading"><a href="#函数" class="headerlink" title="函数"></a>函数<a class="article-anchor" href="#函数" aria-hidden="true"></a></h3><ul>
<li>不要使用Function构造函数创建函数， eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-new-func">no-new-func</a></li>
</ul>
<blockquote>
<p>原因：此方式创建函数和对字符串使用 <code>eval()</code> 一样会产生漏洞</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> add = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;return a + b&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// still bad</span></span><br><span class="line"><span class="keyword">const</span> subtract = <span class="title class_">Function</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;return a - b&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>在函数签名中使用空格，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/space-before-function-paren">space-before-function-paren</a> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/space-before-blocks">space-before-blocks</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> f = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">const</span> g = <span class="keyword">function</span> (<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">const</span> h = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">function</span> <span class="title function_">b</span> (<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> y = <span class="keyword">function</span> <span class="title function_">a</span> (<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用具名函数表达式而非函数声明，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="http://eslint.org/docs/rules/func-style">func-style</a></li>
</ul>
<blockquote>
<p>原因：这样做会导致函数声明被提升，这意味着很容易在文件中定义此函数之前引用它，不利于可读性和可维护性。如果你发现函数定义既庞大又复杂以至于不能理解文件的其他部分，或许你应该将它拆分成模块！别忘记要显式命名表达式，而不用管名字是否是从包含的变量（通常出现在现代浏览器中或者使用 Babel 编译器的时候）中推断的。这样会消除错误调用堆栈中的任何假设。 (讨论)</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="comment">// lexical name distinguished from the variable-referenced invocation(s)</span></span><br><span class="line"><span class="keyword">const</span> short = <span class="keyword">function</span> <span class="title function_">longUniqueMoreDescriptiveLexicalFoo</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>用圆括号包裹自执行匿名函数，eslint：<a target="_blank" rel="noopener external nofollow noreferrer" href="http://eslint.org/docs/rules/wrap-iife.html">wrap-iife</a></li>
</ul>
<blockquote>
<p>原因：一个立即执行匿名函数表达式是一个单一的单元，将其及其调用括号包装在括号中，能够清楚地表达这一点。注意，在到处都是模块的世界中几乎不需要 IIFE。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// immediately-invoked function expression (IIFE)</span></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Welcome to the Internet. Please follow me.&#x27;</span>)</span><br><span class="line">&#125;())</span><br></pre></td></tr></table></figure>

<ul>
<li><p>不要在非函数代码块（<code>if</code> , <code>while</code> 等）中声明函数，eslint：<a target="_blank" rel="noopener external nofollow noreferrer" href="http://eslint.org/docs/rules/no-loop-func.html">no-loop-func</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (isUse) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">test</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">let</span> test</span><br><span class="line"><span class="keyword">if</span> (isUse) &#123;</span><br><span class="line">  test = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>不要将参数命名为 <code>arguments</code>，会导致该参数的优先级高于每个函数作用域内原先存在的 <code>arguments</code> 对象</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span> (<span class="params">name, options, <span class="variable language_">arguments</span></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span> (<span class="params">name, options, args</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>不要使用 <code>arguments</code>，使用 剩余运算符 <code>...</code></p>
<blockquote>
<p><code>arguments</code> 只是一个类数组，而 <code>...</code> 是一个真正的数组</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> args = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>)</span><br><span class="line">  <span class="keyword">return</span> args.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> args.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用参数默认值语法而不是修改函数参数</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// really bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleThings</span> (<span class="params">opts</span>) &#123;</span><br><span class="line">  <span class="comment">// No! We shouldn&#x27;t mutate function arguments.</span></span><br><span class="line">  <span class="comment">// Double bad: if opts is falsy it&#x27;ll be set to an object which may</span></span><br><span class="line">  <span class="comment">// be what you want but it can introduce subtle bugs.</span></span><br><span class="line">  opts = opts || &#123;&#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// still bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleThings</span> (<span class="params">opts</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (opts === <span class="keyword">void</span> <span class="number">0</span>) &#123;</span><br><span class="line">    opts = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleThings</span> (<span class="params">opts = &#123; &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>避免参数默认值的副作用</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> b = <span class="number">1</span></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">count</span> (<span class="params">a = b++</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">count</span>()  <span class="comment">// 1</span></span><br><span class="line"><span class="title function_">count</span>()  <span class="comment">// 2</span></span><br><span class="line"><span class="title function_">count</span>(<span class="number">3</span>) <span class="comment">// 3</span></span><br><span class="line"><span class="title function_">count</span>()  <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<ul>
<li>将参数默认值放在最后</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleThings</span> (<span class="params">opts = &#123;&#125;, name</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleThings</span> (<span class="params">name, opts = &#123;&#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不要更改参数，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-param-reassign.html">no-param-reassign</a></li>
</ul>
<blockquote>
<p>原因：操作作为参数传入的对象可能在原始调用中造成意想不到的变量副作用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">  obj.<span class="property">key</span> = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f2</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> key = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(obj, <span class="string">&#x27;key&#x27;</span>) ? obj.<span class="property">key</span> : <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不要给参数重新赋值，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-param-reassign.html">no-param-reassign</a></li>
</ul>
<blockquote>
<p>原因：参数重新赋值可能会导致无法预期的行为，尤其是当操作 <code>arguments</code> 对象时，也可能导致优化问题，尤其是在 V8 引擎中</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span> (<span class="params">a</span>) &#123;</span><br><span class="line">  a = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f2</span> (<span class="params">a</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!a) &#123; a = <span class="number">1</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f3</span> (<span class="params">a</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> b = a || <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f4</span> (<span class="params">a = <span class="number">1</span></span>) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>调用可变参数函数时建议使用展开运算符 <code>....</code>， eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="http://eslint.org/docs/rules/prefer-spread">prefer-spread</a></li>
</ul>
<blockquote>
<p>原因：显然你无需使用上下文，很难结合 <code>new</code> 和 <code>apply</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="property">log</span>.<span class="title function_">apply</span>(<span class="variable language_">console</span>, x)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(...x)</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="title function_">new</span> (<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bind</span>.<span class="title function_">apply</span>(<span class="title class_">Date</span>, [<span class="literal">null</span>, <span class="number">2016</span>, <span class="number">8</span>, <span class="number">5</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Date</span>(...[<span class="number">2016</span>, <span class="number">8</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure>

<h3 id="箭头函数" class="article-heading"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数<a class="article-anchor" href="#箭头函数" aria-hidden="true"></a></h3><ul>
<li>当你必须使用函数表达式（传递匿名函数）时，使用箭头函数标记. eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="http://eslint.org/docs/rules/prefer-arrow-callback.html">prefer-arrow-callback</a>, <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/arrow-spacing.html">arrow-spacing</a></li>
</ul>
<blockquote>
<p>原因：它将创建在 <code>this</code> 上下文中执行的函数版本，通常是您想要的，并且语法更简洁</p>
</blockquote>
<blockquote>
<p>如果您有一个相当复杂的函数，则可以将该逻辑移到其自己的命名函数表达式中</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> x * y</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> x * y</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>如果函数体只包含一条没有副作用的返回表达式的语句，可以省略花括号并使用隐式的 <code>return</code>， 否则保留花括号并使用 <code>return</code> 语句，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/arrow-parens.html">arrow-parens</a>, <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/arrow-body-style.html">arrow-body-style</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> nextNumber = number + <span class="number">1</span></span><br><span class="line">  <span class="string">`A string containing the <span class="subst">$&#123;nextNumber&#125;</span>.`</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function"><span class="params">number</span> =&gt;</span> <span class="string">`A string containing the <span class="subst">$&#123;number&#125;</span>.`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function">(<span class="params">number</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> nextNumber = number + <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`A string containing the <span class="subst">$&#123;nextNumber&#125;</span>.`</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function">(<span class="params">number, index</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">index</span>: number</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// No implicit return with side effects</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> val = <span class="title function_">callback</span>()</span><br><span class="line">  <span class="keyword">if</span> (val === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="comment">// Do something if callback returns true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bool = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="title function_">foo</span>(<span class="function">() =&gt;</span> bool = <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="title function_">foo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  bool = <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>一旦表达式跨多行，使用圆括号包裹以便更好阅读</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">[<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;put&#x27;</span>].<span class="title function_">map</span>(<span class="function"><span class="params">httpMethod</span> =&gt;</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(</span><br><span class="line">    httpMagicObjectWithAVeryLongName,</span><br><span class="line">    httpMethod</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;put&#x27;</span>].<span class="title function_">map</span>(<span class="function"><span class="params">httpMethod</span> =&gt;</span> (</span><br><span class="line">  <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(</span><br><span class="line">    httpMagicObjectWithAVeryLongName,</span><br><span class="line">    httpMethod</span><br><span class="line">  )</span><br><span class="line">))</span><br></pre></td></tr></table></figure>

<ul>
<li>函数如果只接收一个参数并且没使用用花括号，则省略圆括号，否则为了清晰明确则使用圆括号包裹参数，注意：总是使用圆括号也是可以接受的，eslint 中的 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/arrow-parens#always">“always” 选项</a>，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="http://eslint.org/docs/rules/arrow-parens.html">arrow-parens</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> x * x)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> x * x)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function"><span class="params">number</span> =&gt;</span> (</span><br><span class="line">  <span class="string">`A long string with the <span class="subst">$&#123;number&#125;</span>. It’s so long that we’ve broken it `</span> +</span><br><span class="line">  <span class="string">&#x27;over multiple lines!&#x27;</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> x * y</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">map</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> x * y</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="类-amp-构造函数" class="article-heading"><a href="#类-amp-构造函数" class="headerlink" title="类&amp;构造函数"></a>类&amp;构造函数<a class="article-anchor" href="#类-amp-构造函数" aria-hidden="true"></a></h3><ul>
<li><p>使用 <code>class</code>，避免直接操作 <code>prototype</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Queue</span> (<span class="params">contents = []</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">_queue</span> = [..<span class="property">contents</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Queue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">pop</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="property">_queue</span>[<span class="number">0</span>]</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">_queue</span>.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span> (<span class="params">contents = []</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_queue</span> = [...contents]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">pop</span> () &#123;</span><br><span class="line">    <span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="property">_queue</span>[<span class="number">0</span>]</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_queue</span>.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 <code>extends</code> 来实现继承</p>
</li>
</ul>
<blockquote>
<p>原因：这是一个不会破坏 <code>instanceof</code> 的内建实现原型式继承的方式</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> inherits = <span class="built_in">require</span>(<span class="string">&#x27;inherits&#x27;</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">PeekableQueue</span>(<span class="params">contents</span>) &#123;</span><br><span class="line">  <span class="title class_">Queue</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>, contents)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">inherits</span>(<span class="title class_">PeekableQueue</span>, <span class="title class_">Queue</span>)</span><br><span class="line"><span class="title class_">PeekableQueue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">peek</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">queue</span>[<span class="number">0</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PeekableQueue</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Queue</span> &#123;</span><br><span class="line">  <span class="title function_">peek</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">queue</span>[<span class="number">0</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果未声明构造函数，则类会有一个默认的构造函数，没必要用空的构造函数或者将其委托给父类，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="http://eslint.org/docs/rules/no-useless-constructor">no-useless-constructor</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Jedi</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span> (<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rey</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Jedi</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(...args)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rey</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Jedi</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(...args)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;Rey&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>避免类成员重复，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-dupe-class-members">no-dupe-class-members</a></li>
</ul>
<blockquote>
<p>原因：重复的类成员声明会默认使用最后声明的，通常会导致 bug</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">  <span class="title function_">bar</span> () &#123; <span class="keyword">return</span> <span class="number">1</span> &#125;</span><br><span class="line">  <span class="title function_">bar</span> () &#123; <span class="keyword">return</span> <span class="number">2</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">  <span class="title function_">bar</span> () &#123; <span class="keyword">return</span> <span class="number">1</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">  <span class="title function_">bar</span> () &#123; <span class="keyword">return</span> <span class="number">2</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="模块" class="article-heading"><a href="#模块" class="headerlink" title="模块"></a>模块<a class="article-anchor" href="#模块" aria-hidden="true"></a></h3><ul>
<li>使用标准的 ES6 模块语法 <code>import</code> 和 <code>export</code></li>
</ul>
<blockquote>
<p>原因：模块是未来，让我们现在开始使用未来的特性</p>
</blockquote>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;./util&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = util</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Util</span> <span class="keyword">from</span> <span class="string">&#x27;./util&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Util</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// better</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Util</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./util&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Util</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>不要使用 <code>import</code> 的通配符 <code>*</code>，这样可以确保你只有一个默认的 export</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Util</span> <span class="keyword">from</span> <span class="string">&#x27;./util&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Util</span> <span class="keyword">from</span> <span class="string">&#x27;./util&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>同个文件每个模块只允许 <code>import</code> 一次，有多个 <code>import</code> 请书写在一起，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-duplicate-imports">no-duplicate-imports</a></p>
</li>
</ul>
<blockquote>
<p>原因：这样可以让代码更易于维护</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">&#x27;foo&#x27;</span></span><br><span class="line"><span class="comment">// … some other imports … //</span></span><br><span class="line"><span class="keyword">import</span> &#123; named1, named2 &#125; <span class="keyword">from</span> <span class="string">&#x27;foo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> foo, &#123; named1, named2 &#125; <span class="keyword">from</span> <span class="string">&#x27;foo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> foo, &#123;</span><br><span class="line">  named1,</span><br><span class="line">  named2</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;foo&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>将所有 <code>import</code> 语句放在文件最前方，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/first.md">import&#x2F;imports-first</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">&#x27;foo&#x27;</span></span><br><span class="line">foo.<span class="title function_">init</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> bar <span class="keyword">from</span> <span class="string">&#x27;bar&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">&#x27;foo&#x27;</span></span><br><span class="line"><span class="keyword">import</span> bar <span class="keyword">from</span> <span class="string">&#x27;bar&#x27;</span></span><br><span class="line"></span><br><span class="line">foo.<span class="title function_">init</span>()</span><br></pre></td></tr></table></figure>

<ul>
<li>多行导入应该像多行数组和对象文字一样缩进</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> &#123; longNameA, longNameB, longNameC, longNameD, longNameE &#125; <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  longNameA,</span><br><span class="line">  longNameB,</span><br><span class="line">  longNameC,</span><br><span class="line">  longNameD,</span><br><span class="line">  longNameE</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在模块 <code>import</code> 声明中禁止使用 <code>Webpack</code> 的 <code>loader</code> 语法，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/no-webpack-loader-syntax.md">import&#x2F;no-webpack-loader-syntax</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> fooSass <span class="keyword">from</span> <span class="string">&#x27;css!sass!foo.scss&#x27;</span></span><br><span class="line"><span class="keyword">import</span> barCss <span class="keyword">from</span> <span class="string">&#x27;style!css!bar.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> fooSass <span class="keyword">from</span> <span class="string">&#x27;foo.scss&#x27;</span></span><br><span class="line"><span class="keyword">import</span> barCss <span class="keyword">from</span> <span class="string">&#x27;bar.css&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="迭代器" class="article-heading"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器<a class="article-anchor" href="#迭代器" aria-hidden="true"></a></h3><ul>
<li>不要使用 <code>iterators</code>，建议使用 JS 更高优先级的函数代替 for-in 或 for-of 循环，除非迫不得已，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-iterator.html">no-iterator</a> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-restricted-syntax">no-restricted-syntax</a></li>
</ul>
<blockquote>
</blockquote>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> numbers) &#123;</span><br><span class="line">  sum += num</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line">numbers.<span class="title function_">forEach</span>(<span class="function"><span class="params">num</span> =&gt;</span> sum += num)</span><br><span class="line"></span><br><span class="line"><span class="comment">// better</span></span><br><span class="line"><span class="keyword">const</span> sum = numbers.<span class="title function_">reduce</span>(<span class="function">(<span class="params">total, num</span>) =&gt;</span> total + num, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h3 id="生成器" class="article-heading"><a href="#生成器" class="headerlink" title="生成器"></a>生成器<a class="article-anchor" href="#生成器" aria-hidden="true"></a></h3><ul>
<li>现阶段请不要使用生成器 <code>generator</code></li>
</ul>
<blockquote>
<p>原因：因为不能很好地翻译成 ES5 代码</p>
</blockquote>
<h3 id="对象属性" class="article-heading"><a href="#对象属性" class="headerlink" title="对象属性"></a>对象属性<a class="article-anchor" href="#对象属性" aria-hidden="true"></a></h3><ul>
<li><p>使用 <code>.</code> 来访问对象属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> joke = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;haha&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">28</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> name = joke[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> name = joke.<span class="property">name</span></span><br></pre></td></tr></table></figure></li>
<li><p>当访问的属性是变量时使用 <code>[]</code></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> luke = &#123;</span><br><span class="line">  <span class="attr">jedi</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">28</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getProp</span> (<span class="params">prop</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> luke[prop]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isJedi = <span class="title function_">getProp</span>(<span class="string">&#x27;jedi&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="变量声明" class="article-heading"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明<a class="article-anchor" href="#变量声明" aria-hidden="true"></a></h3><ul>
<li><p>声明变量时，请使用 <code>const</code>、<code>let</code> 关键字，如果没有写关键字，变量就会暴露在全局上下文中，这样很可能会和现有变量冲突，另外，也很难明确该变量的作用域是什么。这里推荐使用 <code>const</code> 来声明变量，我们需要避免全局命名空间的污染。eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="http://eslint.org/docs/rules/no-undef">no-undef</a> <a target="_blank" rel="noopener external nofollow noreferrer" href="http://eslint.org/docs/rules/prefer-const">prefer-const</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">demo = <span class="keyword">new</span> <span class="title class_">Demo</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> demo = <span class="keyword">new</span> <span class="title class_">Demo</span>()</span><br></pre></td></tr></table></figure>
</li>
<li><p>将所有的 <code>const</code> 和 <code>let</code> 分组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">let</span> a</span><br><span class="line"><span class="keyword">const</span> b</span><br><span class="line"><span class="keyword">let</span> c</span><br><span class="line"><span class="keyword">const</span> d</span><br><span class="line"><span class="keyword">let</span> e</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> b</span><br><span class="line"><span class="keyword">const</span> d</span><br><span class="line"><span class="keyword">let</span> a</span><br><span class="line"><span class="keyword">let</span> c</span><br><span class="line"><span class="keyword">let</span> e</span><br></pre></td></tr></table></figure>
</li>
<li><p>变量不要进行链式赋值</p>
</li>
</ul>
<blockquote>
<p>原因：变量链式赋值会创建隐藏的全局变量</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">(<span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// JavaScript interprets this as</span></span><br><span class="line">  <span class="comment">// let a = ( b = ( c = 1 ) );</span></span><br><span class="line">  <span class="comment">// The let keyword only applies to variable a; variables b and c become</span></span><br><span class="line">  <span class="comment">// global variables.</span></span><br><span class="line">  <span class="keyword">let</span> a = b = c = <span class="number">1</span></span><br><span class="line">&#125;())</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// throws ReferenceError</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b) <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">(<span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line">  <span class="keyword">let</span> b = a</span><br><span class="line">  <span class="keyword">let</span> c = a</span><br><span class="line">&#125;())</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// throws ReferenceError</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b) <span class="comment">// throws ReferenceError</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c) <span class="comment">// throws ReferenceError</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// the same applies for `const`</span></span><br></pre></td></tr></table></figure>

<ul>
<li>不允许出现未被使用的变量，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/no-unused-vars">no-unused-vars</a></li>
</ul>
<blockquote>
<p>原因：声明但未被使用的变量通常是不完全重构犯下的错误.这种变量在代码里浪费空间并会给读者造成困扰</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> some_unused_var = <span class="number">42</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Write-only variables are not considered as used.</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="number">10</span></span><br><span class="line">y = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// A read for a modification of itself is not considered as used.</span></span><br><span class="line"><span class="keyword">var</span> z = <span class="number">0</span></span><br><span class="line">z = z + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Unused function arguments.</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getX</span> (<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getXPlusY</span> (<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> x = <span class="number">1</span></span><br><span class="line"><span class="keyword">const</span> y = a + <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(<span class="title function_">getXPlusY</span>(x, y))</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x27;type&#x27; is ignored even if unused because it has a rest property sibling.</span></span><br><span class="line"><span class="comment">// This is a form of extracting an object that omits the specified keys.</span></span><br><span class="line"><span class="keyword">const</span> &#123; type, ...coords &#125; = data</span><br><span class="line"><span class="comment">// &#x27;coords&#x27; is now the &#x27;data&#x27; object without its &#x27;type&#x27; property.</span></span><br></pre></td></tr></table></figure>

<h3 id="Hoisting" class="article-heading"><a href="#Hoisting" class="headerlink" title="Hoisting"></a>Hoisting<a class="article-anchor" href="#Hoisting" aria-hidden="true"></a></h3><ul>
<li><p><code>var</code> 存在变量提升的情况，即 <code>var</code> 声明会被提升至该作用域的顶部，但是他们的赋值并不会。而 <code>const</code> 和 <code>let</code> 并不存在这种情况，他们被赋予了 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Temporal_dead_zone_and_errors_with_let">Temporal Dead Zones, TDZ</a>， 了解 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://es-discourse.com/t/why-typeof-is-no-longer-safe/15">typeof 不再安全</a>很重要</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">example</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(notDefined)   <span class="comment">// =&gt; throws a ReferenceError</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">example</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(declareButNotAssigned)  <span class="comment">// =&gt; undefined</span></span><br><span class="line">  <span class="keyword">var</span> declaredButNotAssigned = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">example</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> declaredButNotAssigned</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(declaredButNotAssigned)   <span class="comment">// =&gt; undefined</span></span><br><span class="line">  declaredButNotAssigned = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">example</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(declaredButNotAssigned)   <span class="comment">// =&gt; throws a ReferenceError</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> declaredButNotAssigned)  <span class="comment">// =&gt; throws a ReferenceError</span></span><br><span class="line">  <span class="keyword">const</span> declaredButNotAssigned = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>匿名函数的变量名会提升，但函数内容不会</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">example</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(anonymous)  <span class="comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">anonymous</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> anonymous = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>命名的函数表达式的变量名会被提升，但函数名和函数函数内容并不会</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(named)  <span class="comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">named</span>()   <span class="comment">// =&gt; TypeError named is not a function</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">superPower</span>()  <span class="comment">// =&gt; ReferenceError superPower is not defined</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> named = <span class="keyword">function</span> <span class="title function_">superPower</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Flying&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(named)  <span class="comment">// =&gt; undefined</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">named</span>()   <span class="comment">// =&gt; TypeError named is not a function</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> named = <span class="keyword">function</span> <span class="title function_">named</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;named&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="比较运算符-amp-相等" class="article-heading"><a href="#比较运算符-amp-相等" class="headerlink" title="比较运算符&amp;相等"></a>比较运算符&amp;相等<a class="article-anchor" href="#比较运算符-amp-相等" aria-hidden="true"></a></h3><ul>
<li><p>使用 <code>===</code> 和 <code>!==</code> 而非 <code>==</code> 和 <code>!=</code>，eslint: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://eslint.org/docs/rules/eqeqeq.html">eqeqeq</a></p>
</li>
<li><p>条件声明例如 <code>if</code> 会用 <code>ToBoolean</code> 这个抽象方法将表达式转成布尔值并遵循如下规则</p>
<ul>
<li><code>Objects</code> 等于 <code>true</code></li>
<li><code>Undefined</code> 等于 <code>false</code></li>
<li><code>Null</code> 等于 <code>false</code></li>
<li><code>Booleans</code> 等于 <code>布尔值</code></li>
<li><code>Numbers</code> 在 <code>+0</code>, <code>-0</code>, 或者 <code>NaN</code> 的情况下等于 <code>false</code>, 其他情况是 <code>true</code></li>
<li><code>Strings</code> 为 <code>&#39;&#39;</code> 时等于 <code>false</code>, 否则是 <code>true</code><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> ([<span class="number">0</span>] &amp;&amp; []) &#123;</span><br><span class="line">  <span class="comment">// true</span></span><br><span class="line">  <span class="comment">// 数组(即使是空数组)也是对象，对象等于true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="分号" class="article-heading"><a href="#分号" class="headerlink" title="分号"></a>分号<a class="article-anchor" href="#分号" aria-hidden="true"></a></h3><ul>
<li><p>我们遵循 <code>Standard</code> 的规范，不使用分号。</p>
<blockquote>
<p>关于应不应该使用分号的讨论有很多，本规范认为非必要的时候，应该不使用分号，好的 <code>JS</code> 程序员应该清楚场景下是一定要加分号的，相信你也是名好的开发者。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> test = <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> str = <span class="string">&#x27;hahaha&#x27;</span>;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> test = <span class="string">&#x27;good&#x27;</span></span><br><span class="line">;(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> str = <span class="string">&#x27;hahaha&#x27;</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="标准特性" class="article-heading"><a href="#标准特性" class="headerlink" title="标准特性"></a>标准特性<a class="article-anchor" href="#标准特性" aria-hidden="true"></a></h3><p>为了代码的可移植性和兼容性，我们应该最大化的使用标准方法，例如优先使用 <code>string.charAt(3)</code> 而不是 <code>string[3]</code></p>
<h3 id="eval" class="article-heading"><a href="#eval" class="headerlink" title="eval()"></a>eval()<a class="article-anchor" href="#eval" aria-hidden="true"></a></h3><p>由于 <code>eval</code> 方法比较 <code>evil</code>，所以我们约定禁止使用该方法</p>
<h3 id="with" class="article-heading"><a href="#with" class="headerlink" title="with() {}"></a>with() {}<a class="article-anchor" href="#with" aria-hidden="true"></a></h3><p>由于 <code>with</code> 方法会产生神奇的作用域，所以我们也是禁止使用该方法的</p>
<h3 id="修改内置对象的原型" class="article-heading"><a href="#修改内置对象的原型" class="headerlink" title="修改内置对象的原型"></a>修改内置对象的原型<a class="article-anchor" href="#修改内置对象的原型" aria-hidden="true"></a></h3><p>不要修改内置对象，如 <code>Object</code> 和 <code>Array</code></p>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2024-10-23T03:38:37.821Z" itemprop="dateModified">上次更新：2024-10-23</time>
                <a href="index.html" class="article-footer-next" title="概述"><span>下一页</span><i class="fa fa-chevron-right"></i></a>
              </footer>
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">目录</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E8%A8%80%E8%A7%84%E8%8C%83"><span class="toc-text">语言规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B"><span class="toc-text">类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E7%94%A8"><span class="toc-text">引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1"><span class="toc-text">对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-text">数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC"><span class="toc-text">解构赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-text">函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-text">箭头函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB-amp-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-text">类&amp;构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97"><span class="toc-text">模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-text">迭代器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">生成器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7"><span class="toc-text">对象属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E"><span class="toc-text">变量声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hoisting"><span class="toc-text">Hoisting</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6-amp-%E7%9B%B8%E7%AD%89"><span class="toc-text">比较运算符&amp;相等</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%8F%B7"><span class="toc-text">分号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E7%89%B9%E6%80%A7"><span class="toc-text">标准特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#eval"><span class="toc-text">eval()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#with"><span class="toc-text">with() {}</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8E%9F%E5%9E%8B"><span class="toc-text">修改内置对象的原型</span></a></li></ol></li></ol>
              <a href="#" id="article-toc-top">回到顶部</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">开始使用</strong><a href="/standard/index.html" class="sidebar-link">概述</a><strong class="sidebar-title">HTML 规范</strong><a href="/standard/html/code.html" class="sidebar-link">代码规范</a><a href="/standard/html/note.html" class="sidebar-link">注释规范</a><a href="/standard/html/webapp.html" class="sidebar-link">WebApp Meta</a><a href="/standard/html/template.html" class="sidebar-link">文件模版</a><strong class="sidebar-title">CSS 规范</strong><a href="/standard/css/code.html" class="sidebar-link">代码规范</a><a href="/standard/css/note.html" class="sidebar-link">注释规范</a><a href="/standard/css/less.html" class="sidebar-link">LESS 规范</a><a href="/standard/css/reset.html" class="sidebar-link">重置样式</a><a href="/standard/css/query.html" class="sidebar-link">媒体查询</a><a href="/standard/css/webkit.html" class="sidebar-link">浏览器兼容性</a><strong class="sidebar-title">javascript 规范</strong><a href="/standard/js/code.html" class="sidebar-link">代码规范</a><a href="/standard/js/language.html" class="sidebar-link current">语法规范</a><strong class="sidebar-title">图片规范</strong><a href="/standard/image/format.html" class="sidebar-link">图片格式</a><a href="/standard/image/size.html" class="sidebar-link">图片大小</a><a href="/standard/image/quality.html" class="sidebar-link">图片质量</a><a href="/standard/image/import.html" class="sidebar-link">图片引入</a><strong class="sidebar-title">命名规范</strong><a href="/standard/name/dir.html" class="sidebar-link">目录命名</a><a href="/standard/name/image.html" class="sidebar-link">图片命名</a><a href="/standard/name/htmlcss.html" class="sidebar-link">HTML/CSS 命名</a><a href="/standard/name/classname.html" class="sidebar-link">ClassName 命名</a><strong class="sidebar-title">前端开发公约</strong><a href="/standard/project/vue.html" class="sidebar-link">vue开发规范</a><a href="/standard/project/react.html" class="sidebar-link">react开发规范</a><a href="/standard/project/structure.html" class="sidebar-link">代码结构</a><a href="/standard/project/rule.html" class="sidebar-link">项目开发约定</a><a href="/standard/project/ci_cd.html" class="sidebar-link">持续集成</a><a href="/standard/project/template.html" class="sidebar-link">模板工程</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2024 <a href="https://github.com/hexojs/hexo/graphs/contributors" rel="external nofollow noreferrer" target="_blank">zuo.jiangtao@h3c.com/ZuoJiangtao</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>.
    </div>
    <div id="footer-links">
      <a href="https://github.com/Zuojiangtao" rel="external nofollow noreferrer" class="footer-link" target="_blank"><i class="fa fa-github"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/standard/" class="mobile-nav-link">开发规范</a><a href="/design/" class="mobile-nav-link">开发指南</a><a href="/ecology/" class="mobile-nav-link">前沿生态</a><a href="/util/" class="mobile-nav-link">开发工具</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/https://github.com/Zuojiangtao" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">开始使用</strong><a href="/standard/index.html" class="mobile-nav-link">概述</a><strong class="mobile-nav-title">HTML 规范</strong><a href="/standard/html/code.html" class="mobile-nav-link">代码规范</a><a href="/standard/html/note.html" class="mobile-nav-link">注释规范</a><a href="/standard/html/webapp.html" class="mobile-nav-link">WebApp Meta</a><a href="/standard/html/template.html" class="mobile-nav-link">文件模版</a><strong class="mobile-nav-title">CSS 规范</strong><a href="/standard/css/code.html" class="mobile-nav-link">代码规范</a><a href="/standard/css/note.html" class="mobile-nav-link">注释规范</a><a href="/standard/css/less.html" class="mobile-nav-link">LESS 规范</a><a href="/standard/css/reset.html" class="mobile-nav-link">重置样式</a><a href="/standard/css/query.html" class="mobile-nav-link">媒体查询</a><a href="/standard/css/webkit.html" class="mobile-nav-link">浏览器兼容性</a><strong class="mobile-nav-title">javascript 规范</strong><a href="/standard/js/code.html" class="mobile-nav-link">代码规范</a><a href="/standard/js/language.html" class="mobile-nav-link current">语法规范</a><strong class="mobile-nav-title">图片规范</strong><a href="/standard/image/format.html" class="mobile-nav-link">图片格式</a><a href="/standard/image/size.html" class="mobile-nav-link">图片大小</a><a href="/standard/image/quality.html" class="mobile-nav-link">图片质量</a><a href="/standard/image/import.html" class="mobile-nav-link">图片引入</a><strong class="mobile-nav-title">命名规范</strong><a href="/standard/name/dir.html" class="mobile-nav-link">目录命名</a><a href="/standard/name/image.html" class="mobile-nav-link">图片命名</a><a href="/standard/name/htmlcss.html" class="mobile-nav-link">HTML/CSS 命名</a><a href="/standard/name/classname.html" class="mobile-nav-link">ClassName 命名</a><strong class="mobile-nav-title">前端开发公约</strong><a href="/standard/project/vue.html" class="mobile-nav-link">vue开发规范</a><a href="/standard/project/react.html" class="mobile-nav-link">react开发规范</a><a href="/standard/project/structure.html" class="mobile-nav-link">代码结构</a><a href="/standard/project/rule.html" class="mobile-nav-link">项目开发约定</a><a href="/standard/project/ci_cd.html" class="mobile-nav-link">持续集成</a><a href="/standard/project/template.html" class="mobile-nav-link">模板工程</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>简体中文</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="zh-cn" selected>简体中文</option>
      
        <option value="en">English</option>
      
    </select>
  </div>
</nav>
</body>
</html>
